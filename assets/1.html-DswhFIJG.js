import{_ as e,c as l,a,b as t,d as n,e as c,r as o,o as i}from"./app-CiE264yX.js";const u="/assets/Defs%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE-CFkra6AB.png",k={},g={href:"https://www.rimworldwiki.com/wiki/Modding_Tutorials/PatchOperations",target:"_blank",rel:"noopener noreferrer"};function d(r,s){const p=o("ExternalLinkIcon");return i(),l("div",null,[s[3]||(s[3]=a('<p>在XML补丁开发之前，我们需要先对Defs有一个基本的了解。</p><h2 id="一、-什么是defs" tabindex="-1"><a class="header-anchor" href="#一、-什么是defs"><span>一、 什么是Defs</span></a></h2><p>Defs是环世界（RimWorld）游戏中的数据定义文件，使用XML格式存储。它们定义了游戏中的各种元素，如物品、建筑、植物、动物等。通过修改这些Defs文件，可以实现对游戏内容的添加或修改。</p><h3 id="_1-defs存放位置" tabindex="-1"><a class="header-anchor" href="#_1-defs存放位置"><span>1. Defs存放位置</span></a></h3><p>位置：安装目录\\Data\\DLC目录\\Defs</p><p>例如：E:\\SteamLibrary\\steamapps\\common\\RimWorld\\Data\\Core\\Defs</p><p><img src="'+u+`" alt="Defs存放位置.png"></p><h3 id="_2-defs讲解" tabindex="-1"><a class="header-anchor" href="#_2-defs讲解"><span>2. Defs讲解</span></a></h3><p>“安装目录\\Data\\Core\\Defs\\ThingDefs_Plants\\Plants_Cultivated_Farm.xml”中定义了可以栽培的作物，我们拿第一个作物“Plant_Rice”(水稻)作为示例：</p><p>可以看到“Plant_Rice”的Def包含了作物的名称、标签、描述、统计数据、图形数据、种植信息等，这里对一些常用的信息进行说明。</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThingDef</span> <span class="token attr-name">ParentName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PlantBase<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defName</span><span class="token punctuation">&gt;</span></span>Plant_Rice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defName</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>rice plant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>A short, fast-growing crop that yields small edible grains. Its great nutritional output and ease of</span>
<span class="line">        cultivation has made it the economic core of many great civilizations. While rice grows quickly, it is sensitive</span>
<span class="line">        to soil fertility and will not fare well in poor soil.</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>statBases</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MaxHitPoints</span><span class="token punctuation">&gt;</span></span>85<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MaxHitPoints</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--最大耐久度--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Nutrition</span><span class="token punctuation">&gt;</span></span>0.175<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Nutrition</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--营养值--&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>statBases</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>graphicData</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>texPath</span><span class="token punctuation">&gt;</span></span>Things/Plant/RicePlant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>texPath</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>graphicClass</span><span class="token punctuation">&gt;</span></span>Graphic_Random<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>graphicClass</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>graphicData</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectable</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectable</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pathCost</span><span class="token punctuation">&gt;</span></span>14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pathCost</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ingestible</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plant</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>immatureGraphicPath</span><span class="token punctuation">&gt;</span></span>Things/Plant/RicePlant_Immature<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>immatureGraphicPath</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dieIfLeafless</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dieIfLeafless</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxMeshCount</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxMeshCount</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>harvestTag</span><span class="token punctuation">&gt;</span></span>Standard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>harvestTag</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>harvestedThingDef</span><span class="token punctuation">&gt;</span></span>RawRice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>harvestedThingDef</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--产出的物品--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>harvestYield</span><span class="token punctuation">&gt;</span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>harvestYield</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--产出的数量--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sowTags</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--可以种植的位置--&gt;</span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Ground<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--地面--&gt;</span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Hydroponic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--水栽培--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sowTags</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>topWindExposure</span><span class="token punctuation">&gt;</span></span>0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>topWindExposure</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>growDays</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>growDays</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--生长时间--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>visualSizeRange</span><span class="token punctuation">&gt;</span></span>0.5~0.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>visualSizeRange</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wildOrder</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wildOrder</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>purpose</span><span class="token punctuation">&gt;</span></span>Food<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>purpose</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>humanFoodPlant</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>humanFoodPlant</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plant</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ThingDef</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>“Plant_Rice”继承了“安装目录\\Data\\Core\\Defs\\ThingDefs_Plants\\Plants_Bases.xml”中的“PlantBase”，“PlantBase”继承了“PlantBaseNonEdible”，这样可以复用一些通用的属性，同时也能进行属性的覆盖。</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThingDef</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PlantBaseNonEdible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Abstract</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>True<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span><span class="token punctuation">&gt;</span></span>Plant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>category</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thingClass</span><span class="token punctuation">&gt;</span></span>Plant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thingClass</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>altitudeLayer</span><span class="token punctuation">&gt;</span></span>LowPlant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>altitudeLayer</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>useHitPoints</span><span class="token punctuation">&gt;</span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>useHitPoints</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>statBases</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Flammability</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Flammability</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BeautyOutdoors</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BeautyOutdoors</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>statBases</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tickerType</span><span class="token punctuation">&gt;</span></span>Long<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tickerType</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectable</span><span class="token punctuation">&gt;</span></span>False<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectable</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>neverMultiSelect</span><span class="token punctuation">&gt;</span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>neverMultiSelect</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>drawerType</span><span class="token punctuation">&gt;</span></span>MapMeshOnly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>drawerType</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pathCostIgnoreRepeat</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pathCostIgnoreRepeat</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>graphicData</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>graphicClass</span><span class="token punctuation">&gt;</span></span>Graphic_Random<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>graphicClass</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shaderType</span><span class="token punctuation">&gt;</span></span>CutoutPlant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shaderType</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>graphicData</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plant</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fertilityMin</span><span class="token punctuation">&gt;</span></span>0.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fertilityMin</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fertilitySensitivity</span><span class="token punctuation">&gt;</span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fertilitySensitivity</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>soundHarvesting</span><span class="token punctuation">&gt;</span></span>Harvest_Standard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>soundHarvesting</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>soundHarvestFinish</span><span class="token punctuation">&gt;</span></span>Harvest_Standard_Finish<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>soundHarvestFinish</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sowWork</span><span class="token punctuation">&gt;</span></span>170<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sowWork</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>harvestWork</span><span class="token punctuation">&gt;</span></span>200<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>harvestWork</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>visualSizeRange</span><span class="token punctuation">&gt;</span></span>0.3~1.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>visualSizeRange</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>topWindExposure</span><span class="token punctuation">&gt;</span></span>0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>topWindExposure</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plant</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thingCategories</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Plants<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thingCategories</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ThingDef</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThingDef</span> <span class="token attr-name">ParentName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PlantBaseNonEdible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PlantBase<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Abstract</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>True<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ingestible</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foodType</span><span class="token punctuation">&gt;</span></span>Plant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foodType</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preferability</span><span class="token punctuation">&gt;</span></span>RawBad<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>preferability</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ingestible</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ThingDef</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-如何修改defs" tabindex="-1"><a class="header-anchor" href="#_3-如何修改defs"><span>3. 如何修改Defs</span></a></h3><p>修改Defs通常有两种方式：</p><ol><li><strong>直接修改</strong>：直接在游戏安装目录下的Defs文件夹中修改xml文件。这种方式不推荐，因为会影响游戏本体，且在游戏更新时可能会被覆盖。</li><li><strong>使用补丁</strong>：通过创建一个补丁文件，使用补丁的方式来修改或添加Defs。这种方式更安全，不会影响游戏本体，并且可以在游戏更新时保持兼容。</li></ol><p>由于是讲模组开发，所有我们这里使用打补丁的方式进行修改Defs。</p><h3 id="_4-使用补丁修改defs" tabindex="-1"><a class="header-anchor" href="#_4-使用补丁修改defs"><span>4. 使用补丁修改Defs</span></a></h3>`,18)),t("p",null,[s[1]||(s[1]=n("补丁的具体规则参照")),t("a",g,[s[0]||(s[0]=n("补丁说明")),c(p)]),s[2]||(s[2]=n("。"))]),s[4]||(s[4]=a(`<h4 id="案例1-修改-plant-rice-的生长时间-将其从3天改为2天。" tabindex="-1"><a class="header-anchor" href="#案例1-修改-plant-rice-的生长时间-将其从3天改为2天。"><span>案例1：修改“Plant_Rice”的生长时间，将其从3天改为2天。</span></a></h4><p>我们在模组文件的Patches中创建ChangePlantGrowDays.xml文件</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">MyMod</span>
<span class="line">  - Patches</span>
<span class="line">    - ChangePlantGrowDays.xml</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在ChangePlantGrowDays.xml文件中添加以下内容：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Patch</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Operation</span> <span class="token attr-name">Class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PatchOperationReplace<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--使用Replace操作--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span><span class="token punctuation">&gt;</span></span>/Defs/ThingDef[defName = &quot;Plant_Rice&quot;]/plant/growDays<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--使用xpath定位Defs中的数据--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>growDays</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>energyPerSecond</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--替换生长时间为2天--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Operation</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Patch</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="案例2-我们让-plant-corn-玉米-也可以种植在水栽培中。" tabindex="-1"><a class="header-anchor" href="#案例2-我们让-plant-corn-玉米-也可以种植在水栽培中。"><span>案例2：我们让“Plant_Corn”（玉米）也可以种植在水栽培中。</span></a></h4><p>我们在模组文件的Patches中创建ChangePlantSowTags.xml文件</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">MyMod</span>
<span class="line">  - Patches</span>
<span class="line">    - ChangePlantSowTags.xml</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在ChangePlantSowTags.xml文件中添加以下内容：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Patch</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Operation</span> <span class="token attr-name">Class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PatchOperationAdd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--使用Add操作--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span><span class="token punctuation">&gt;</span></span>/Defs/ThingDef[defName = &quot;Plant_Corn&quot;]/plant/sowTags<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Hydroponic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--水栽培--&gt;</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Operation</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Patch</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-总结" tabindex="-1"><a class="header-anchor" href="#_5-总结"><span>5. 总结</span></a></h3><p>在Patches目录创建XML补丁可以实现对游戏Defs的修改或添加，是最简单的一种方式，同时也是修改游戏中基础数据最有效的方式，交由大家自行探索。</p>`,12))])}const m=e(k,[["render",d]]),h=JSON.parse('{"path":"/blogs/rimword-mod/1/1.html","title":"环世界模组开发 - 1. XML补丁开发","lang":"zh-CN","frontmatter":{"title":"环世界模组开发 - 1. XML补丁开发","date":"2025/06/29 10:00:01","categories":["环世界模组开发"],"tags":["RimWorld","Mod"]},"headers":[{"level":2,"title":"一、 什么是Defs","slug":"一、-什么是defs","link":"#一、-什么是defs","children":[{"level":3,"title":"1. Defs存放位置","slug":"_1-defs存放位置","link":"#_1-defs存放位置","children":[]},{"level":3,"title":"2. Defs讲解","slug":"_2-defs讲解","link":"#_2-defs讲解","children":[]},{"level":3,"title":"3. 如何修改Defs","slug":"_3-如何修改defs","link":"#_3-如何修改defs","children":[]},{"level":3,"title":"4. 使用补丁修改Defs","slug":"_4-使用补丁修改defs","link":"#_4-使用补丁修改defs","children":[]},{"level":3,"title":"5. 总结","slug":"_5-总结","link":"#_5-总结","children":[]}]}],"git":{"createdTime":1752069415000,"updatedTime":1754564921000,"contributors":[{"name":"renxian","email":"2275568171@qq.com","commits":2}]},"filePathRelative":"blogs/rimword-mod/1/1.md"}');export{m as comp,h as data};
